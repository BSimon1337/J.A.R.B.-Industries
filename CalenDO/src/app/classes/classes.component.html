<div class="container-fluid py-4 px-5 min-vh-100">
  <!-- Page Title -->
  <div class="header d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-dark mb-0">My Classes</h2>
    <button class="btn btn-success" (click)="showForm = !showForm">
      {{
        showForm
          ? editingId !== null
            ? "Editing Class"
            : "Close Form"
          : "+ Add Class"
      }}
    </button>
  </div>

  <!-- Add/Edit Class Form -->
  <form
    *ngIf="showForm"
    (ngSubmit)="addOrUpdateClass()"
    class="row g-3 mb-5 p-4 bg-light rounded-4 shadow-sm"
  >
    <div class="col-md-3">
      <input
        class="form-control"
        [(ngModel)]="newClass.name"
        name="name"
        placeholder="Class Name"
        required
      />
    </div>
    <div class="col-md-2">
      <input
        class="form-control"
        [(ngModel)]="newClass.time"
        name="time"
        placeholder="Time"
        required
      />
    </div>
    <div class="col-md-3">
      <input
        class="form-control"
        [(ngModel)]="newClass.instructor"
        name="instructor"
        placeholder="Instructor"
      />
    </div>
    <div class="col-md-4">
      <input
        class="form-control"
        [(ngModel)]="newClass.location"
        name="location"
        placeholder="Location"
      />
    </div>

    <div class="col-12 d-flex flex-wrap gap-3 mt-2">
      <div
        *ngFor="let day of ['Mon', 'Tue', 'Wed', 'Thu', 'Fri']"
        class="form-check"
      >
        <input
          type="checkbox"
          class="form-check-input"
          [value]="day"
          (change)="toggleDay(day)"
          [checked]="newClass.daysOfWeek?.includes(day)"
          id="{{ day }}"
        />
        <label class="form-check-label" for="{{ day }}">{{ day }}</label>
      </div>
    </div>

    <div class="col-12 d-flex justify-content-between gap-2">
      <button type="submit" class="btn btn-primary w-100">
        {{ editingId !== null ? "Update Class" : "Save Class" }}
      </button>
      <button
        *ngIf="editingId !== null"
        type="button"
        class="btn btn-outline-secondary"
        (click)="cancelEdit()"
      >
        Cancel
      </button>
    </div>
  </form>

  <!-- Class Display -->
  <div *ngIf="classes.length === 0" class="text-muted text-center py-5">
    No classes added yet. Click ‚ÄúAdd Class‚Äù to get started!
  </div>

  <div class="row g-4" *ngIf="classes.length > 0">
    <div class="col-md-6 col-lg-4" *ngFor="let cls of classes">
      <div class="card p-3 h-100">
        <div class="d-flex justify-content-between">
          <div>
            <h5 class="mb-1">{{ cls.name }}</h5>
            <div class="card-text text-muted small mb-1">
              {{ cls.instructor }} ‚Äì {{ cls.location }}
            </div>
            <div class="card-text time">Time: {{ cls.time }}</div>
            <div>
              <small class="card-text text-muted"
                >Days: {{ cls.daysOfWeek.join(", ") }}</small
              >
            </div>
          </div>
          <div class="d-flex flex-column align-items-end gap-2">
            <button class="icon-btn" (click)="editClass(cls)" title="Edit">
              ‚úèÔ∏è
            </button>
            <button
              class="icon-btn text-danger"
              (click)="deleteClass(cls.id)"
              title="Delete"
            >
              üóëÔ∏è
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
